<section class="course-list">
  <header>
    <div class="course-header">
      <button mat-raised-button color="primary" (click)="accordion.openAll()">
        alle aufklappen
      </button>
      <button mat-raised-button color="primary" (click)="accordion.closeAll()">
        alle zuklappen
      </button>
      <h3>Liste der abgeschlossenen Kurse</h3>
    </div>
  </header>
  <app-loading></app-loading>
  <mat-accordion class="course-headers-align" multi>
    <div *ngFor="let course of courses$ | async as courses">
      <mat-expansion-panel
        (opened)="handleOpened(course)"
        (closed)="handleClosed(course)"
      >
        <mat-expansion-panel-header>
          <mat-panel-title>
            <p *ngIf="currentOpenedCourseId !== course.id">
              {{ course.title }}
            </p>
            <h3 *ngIf="currentOpenedCourseId === course.id">
              {{ course.title }}
            </h3>
          </mat-panel-title>
          <mat-panel-description *ngIf="currentOpenedCourseId !== course.id">
            {{ course.confirmationDate | date: 'dd.MM.yyyy' }},
            {{ course.duration }} Std.
          </mat-panel-description>
          <button *ngIf="edit" mat-icon-button (click)="editCourse(course.id)">
            <mat-icon>edit</mat-icon>
          </button>
        </mat-expansion-panel-header>
        <app-course-detail-user [course]="course"></app-course-detail-user>
      </mat-expansion-panel>
    </div>
  </mat-accordion>
</section>
